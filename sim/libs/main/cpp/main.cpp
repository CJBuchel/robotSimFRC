/*
 * This C++ source file was generated by the Gradle 'init' task.
 */

#include <iostream>
#include <stdlib.h>
#include "main.h"

int main(int argc, char const *argv[]) {
	std::cout << "Simulator Start [PRESS ESC TO EXIT]" << std::endl;
	running = true;
	std::cout << "Creating window..." << std::endl;
	Sim sim;

	// Initialize Simulator
	sim.Init();

	while (running) {
		sim.window->reset();
		sim.OnUpdate();
		sim.window->update();

		// Determin FPS of program (ish)
		double ms = 1000/sim.config.window.FPS; // 60 FPS = 16.6ms every cycle
		if (sim.config.window.FPS == 0) {
			ms = 1;
		}

		// Use waitkey to wait and detect if user inputs esc
		if (cv::waitKey(ms) == 27) {
			running = false;
		}
	}

	std::cout << "Program end" << std::endl;

	return 0;
}